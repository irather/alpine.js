<html>
  <head>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="main" x-data="init()">
      <h4 class="font-xxlarge">Movie Search in Alpine.js</h4>
      <div class="searchArea">
        <input class="inputText" type="text" placeholder="Type to search a fact" x-model="q" />
        <button class="bg-default" @click="search()">Search</button>
      </div>
      <div>
        <template x-for="result in results">
          <div class="movieCard">
            <div>
              <img x-bind:src="result.Poster" />
            </div>
            <div class="movieDetailItem">
              <span>Title:</span>
              <span><b x-text="result.Title"></b></span>
            </div>
            <div class="movieDetailItem">
              <span>Year:</span>
              <span><b x-text="result.Year"></b></span>
            </div>
          </div>
        </template>
      </div>
    </div>
    <script>
      function init() {
        return {
          results: [],
          q: "",
          search: function () {
            fetch("http://www.omdbapi.com/?&apikey=e1a73560&s=" + this.q + "&type=movie")
              .then((res) => res.json())
              .then((res) => (this.results = res.Search))
              .catch((err) => console.log(err));
          },
        };
      }
    </script>
  </body>
</html>
